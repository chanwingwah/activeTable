<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <!-- <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scale=none"> -->
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>动态表格设计</title>
    <link rel="stylesheet" href="jquery-easyui-1.8.5/themes/default/easyui.css">
    <link rel="stylesheet" href="jquery-easyui-1.8.5/themes/icon.css">
    <script src="jquery-easyui-1.8.5/jquery.min.js"></script>
    <script src="jquery-easyui-1.8.5/jquery.easyui.min.js"></script>

</head>

<body>
    <div style="margin:20px 0;"></div>
    <div id="editcolumn">
        <div style="margin:20px 0;"></div>
        <table title="Folder Browser" class="easyui-treegrid" style="width:800px;height:auto"
               data-options="
                url: 'json/head.json',
                method: 'get',
                iconCls: 'icon-ok',
                rownumbers: true,
                idField: 'key',
                treeField: 'name',
                onBeforeCollapse: function () {return false}
                 ">
            <thead>
                <tr>
                    <th data-options="field:'name'" width="220">表头名</th>
                    <th data-options="field:'type'" width="100">特性</th>
                    <th data-options="field:'des'" width="348">描述</th>
                    <th data-options="field:'type'" width="200">操作</th>
                </tr>
            </thead>
        </table>
    </div>

    <div style="margin:20px 0;"></div>
    <table id="table" title="DataGrid with Toolbar" style="width:800px;height:auto">
    </table>
    <script src="index.js"></script>
    <script>

        // $('#editcolumn').panel({
        //     width: 800,
        //     height: 150,
        //     title: '表头配置',
        //     tools: [{
        //         iconCls: 'icon-add',
        //         handler: function () { alert('new') }
        //     }, {
        //         iconCls: 'icon-save',
        //         handler: function () { alert('save') }
        //     }]
        // });
        // $('#editcolumn').panel('panel').toggle();

        // var columnConfig;
        // $.get('json/head.json', function (data) {
        //     // 生成表头，然后初始化表格
        //     columnConfig = data;
        // });
        // 定义界面初始化和column编辑界面
        // 1. 增加列
        // 2. 增加子列
        // 3. 编辑列名
        // 4. 删除列 （用户删除列之后就数据库删除该行数据）
        // 5. 排序
        // 列移动
        // 
        var ColumnConfig = (function () {
            //私有方法，外面将访问不到
            var _createRow = function (that) {
                // 两种创建 1、自定义  2、用UI 控件
                var $row = $('')
                that.append();
            }


            //视图和页面紧密联系
            /*
             *config{slector，columns} 
            */
            var ColumnConfig = function (config) { }

            // 1、渲染
            ColumnConfig.prototype.init = function (config) {
                this.contaner = $(slector);
                // 生成dom视图
                // 表格的操作比较灵活;

                return this;
            };

            // 2、新加：（新加单列， 新加合并列（允许空，允许只有一个，是非数据列）），在合并列中新增；

            // 3、操作： (编辑信息，编辑是加入入到哪一个合并列)，排序;

            // 4、排序： (新增自动生成排序号，移动到新的数据后就生成新的序号)， 上移与下移；后台排好序

            // 5、删除： 删除合并列、 删除单列；

        })()


        var TextCount = (function () {
            //私有方法，外面将访问不到
            var _bind = function (that) {
                that.input.on('keyup', function () {
                    that.render();
                });
            }
            // 获取数据
            var _getNum = function (that) {
                return that.input.val().length;
            }

            // 对象构建函数
            var TextCountFun = function (config) {

            }

            // 通过原型链来继承
            TextCountFun.prototype.init = function (config) {
                this.input = $(config.id);
                console.log(config);
                _bind(this);

                return this;
            };

            // 通过原型链来继承
            TextCountFun.prototype.render = function () {
                var num = _getNum(this);

                if ($('#J_input_count').length !== 2) {
                    this.input.after('<span id="J_input_count"></span>');
                };

                $('#J_input_count').html(num + '个字');
            };

            //返回构造函数
            return TextCountFun;

        })();


    </script>
</body>

</html>